<!doctype html>
<html lang="en" class="h-100">

    <head>
        <title>FIZZ BUZZ: The Code</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <!-- site.css -->
        <link rel="stylesheet" href="/css/site.css">

        <!-- prism.css -->
        <link rel="stylesheet" href="/css/prism.css">

        <!-- icon -->
        <link rel="icon" type="img/png" href="/img/favicon-32x32.png">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Racing+Sans+One&family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">        <script src="https://kit.fontawesome.com/5db21ba9c6.js" crossorigin="anonymous"></script>

        <!-- font awesome -->
        <script src="https://kit.fontawesome.com/5db21ba9c6.js" crossorigin="anonymous"></script>
    </head>

    <body class="d-flex flex-column h-100">
        <!--NAV BAR-->
        <nav class="navbar navbar-dark navbar-expand-md fixed-top background-custom">
            <div class="container-fluid">
                <img src="img/android-chrome-192x192.png" class="me-3" 
                    width="30" height="24">
                <a class="navbar-brand main-font" href="/index.html">Fizz Buzz</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav me-auto mb-2 mb-md-0">
                        <li class="nav-item">
                            <a class="nav-link secondary-font" href="/index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link secondary-font" href="/app.html">The App</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active secondary-font" aria-current="page" href="/code.html">The Code</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link secondary-font" target="_blank" href="https://github.com/DominicWegrzynowski/FizzBuzz">Git Repo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link secondary-font" target="_blank" href="https://dominicdeveloper.netlify.app/">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!--CONTENT-->
        <main class="flex-shrink-0">
            <div class="container my-5 mt-5 py-4 px-5">
                <!-- HEADER -->
                <div class="row border-1 border-bottom border-dark pb-md-2">
                    <div class="col">
                        <h1 class="secondary-font pt-3 pt-md-5"><strong>FIZZ BUZZ's Code:</strong></h1>
                    </div>
                    <div class="col d-flex justify-content-center ps-md-5 ms-md-5">
                        <img class="ms-md-5" src="/img/fizzbuzz-trans.svg" width="150" height="150" alt="fizz buzz logo">
                    </div>
                </div>
                    
                <div class="row row-cols-1 row-cols-lg-2">
                    <!-- Code Window -->
                    <div class="col-lg-7 mt-md-5 mt-3 pt-md-5">
                        <pre class="line-numbers">
                            <code class="language-javascript">
                                function getValues() {
    
                                    let fizzValue = parseInt(document.getElementById("fizzValue").value);
                                    let buzzValue = parseInt(document.getElementById("buzzValue").value);
                                
                                    if(Number.isInteger(fizzValue) && Number.isInteger(buzzValue)) {
                                
                                        let fizzBuzzArray = generateData(fizzValue, buzzValue);
                                        displayData(fizzBuzzArray);
                                
                                    } else {
                                
                                        alert("You must enter an integer");
                                
                                    }
                                
                                }
                                
                                function generateData(fizzValue, buzzValue) {
                                
                                    let returnArray = [];
                                
                                    for (let i = 1; i <= 100; i++) {
                                        //turinary operator evaluates true false
                                        let value = (( i % fizzValue === 0 ? "Fizz": "")
                                                  + (i % buzzValue === 0 ? "Buzz" : "" ) || i );

                                        returnArray.push(value);
                                    }
                                
                                    return returnArray;
                                
                                }
                                
                                function displayData(fizzBuzzArray) {
                                    
                                    //get the table body element from the page
                                    let tableBody = document.getElementById("results");
                                
                                    //get the template itsself
                                    let templateRow = document.getElementById("fizzBuzzTemplate");
                                
                                    //clear table
                                    tableBody.innerHTML = "";
                                    
                                    for (let i = 0; i < fizzBuzzArray.length; i += 5) {
                                
                                        let tableRow = document.importNode(templateRow.content, true);
                                        
                                        let rowCols = tableRow.querySelectorAll("td");
                                
                                        rowCols[0].classList.add(fizzBuzzArray[i]); 
                                        rowCols[0].textContent = fizzBuzzArray[i]; 
                                
                                        rowCols[1].classList.add(fizzBuzzArray[i + 1]);
                                        rowCols[1].textContent = fizzBuzzArray[i + 1];
                                
                                        rowCols[2].classList.add(fizzBuzzArray[i + 2]);
                                        rowCols[2].textContent = fizzBuzzArray[i + 2];
                                
                                        rowCols[3].classList.add(fizzBuzzArray[i + 3]);
                                        rowCols[3].textContent = fizzBuzzArray[i + 3];
                                
                                        rowCols[4].classList.add(fizzBuzzArray[i + 4]);
                                        rowCols[4].textContent = fizzBuzzArray[i + 4];
                                
                                        tableBody.appendChild(tableRow);
                                    }
                                    
                                }

                            </code>
                        </pre>
                    </div>
                    <!-- Code Description -->
                    <div class="col-lg-5">
                        <h4 class="text-center"><strong>The Design:</strong></h4>
                        <p>To keep the code as clean as possible, the program is encapsulated into three functions:</p>
                        <ul>
                            <li><h5>getValues</h5></li>
                            <p>This function serves as the entry point to the program, being the function called by the button's click event listener. First, it stores the user input into variables by accessing the value property from the fizzValue and buzzValue elements.
                                Next, it castes these variables from string to number types, and validates that they are integers. Next, it creates a local array called fizzBuzzArray and assigns it the array returned by the generateData function, passing it the fizzValue and buzzValue variables. Lastly, it calls the displayData function, passing it the newley generated fizzBuzzArray as it's argument.
                            </p>
                            <li><h5>generateData</h5></li>
                            <p>This function serves as the main logic of the program, being responsible for generating the array of numbers and replacing certain numbers with their corresponding fizzbuzz value. To do this, first the returnArray is initialized. Next, there is a for loop looping from 1-100(including the 100). Within this loop, there is a variable being defined called value which contains the result of the following conditional expression. This expression uses two turinary operators to build a FizzBuzz string. It essentially reads, if the current index(i) in the loop is a multiple of the fizzValue set value to "Fizz" , if it's not a multiple then set value to "". It does the same thing for the buzzValue and concatinates those two expression results together as either "Fizz" + "" = "Fizz", "" + "Buzz" = "Buzz", "Fizz" + "Buzz" = "FizzBuzz", or finally simply the value of the index(i) in the scenario where it is an empty string. It then pushes this value to the array and repeats this process until the loop finishes. Lastly, it returns this array.</p>
                            <li><h5>displayData</h5></li>
                            <p>displayData uses a more modular approach to modifying the DOM and displaying the fizzBuzzArray. This modular approach consists of using the following template tag under the fizzBuzzTemplate id: </p>
                            <pre class="line-numbers">
                                <code class="language-markup">
                                    &lt;template id="fizzBuzzTemplate">
                                        &lt;tr>
                                            &lt;td>&lt;/td>
                                            &lt;td>&lt;/td>
                                            &lt;td>&lt;/td>
                                            &lt;td>&lt;/td>
                                            &lt;td>&lt;/td>
                                        &lt;/tr>
                                    &lt;/template>
                                </code>
                            </pre>
                            <p>Within the displayData function itsself, it first stores two variables: tableBody, and templateRow. The tableBody variable gets assigned the "results" table that will store the results of the data. The templateRow variable gets assigned the fizzBuzzTemplate displayed above. Next, the table is cleared to ensure that there is no data in it before the function begins to add the data to it. There is then a for loop going from 0 to the length of the fizzBuzzArray(passed in as an argument) and incrementing 5 at a time, since there will be 5 columns per row. The first thing done inside of this loop is the initialization of the tableRow variable. It's value is the value returned by the document.importNode method. This method creates a copy of a DocumentFragment(the template) from the app.html page. It takes two arguments, the first being the templateRow.content which is a copy of the current content in the templateRow template. The second argument is "true" which tells the method to include the DocumentFragment's descendents which is important for this project. Next, the variable rowCols is initialized to one td element in the template. The function then does two things five times per iteration. First, it adds the fizzBuzzArray value to classList to add in different colored styling for each fizzbuzz element. Second, it assigns the textContent of the current td in the rowCols array to the current fizzBuzzArray element, inserting the actual value into the td element. Once it does this five times, for each td value, it then calls the appendChild method on the tableBody variable and adds this tableRow to it. This happens 100 times and the program finishes with an updated table of data.</p>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
        <!--FOOTER-->
        <footer class="footer mt-auto py-3 sticky-footer background-custom">
            <div class="container-fluid">
                <div class="row row-cols-1 row-cols-lg-3 gy-2">
                    <div class="col order-last order-lg-first d-flex align-items-center text-light">
                        <div class="">
                            <span class="text-muted">
                                &copy;2021
                            </span>
                            Dominic Wegrzynowski | dominicwegrzynowski@gmail.com
                        </div>
                    </div>
                    <div class="col d-flex align-items-center justify-content-start justify-content-lg-center">
                        <a href="https://dominicdeveloper.netlify.app/" target="_self">
                            <img src="/img/dominic-weg-logo.svg" alt="Dominic Wegrzynowski Logo" height="36">
                        </a>                    </div>
                    <div class="col d-flex align-items-center justify-content-start justify-content-lg-end">
                        <div class="row">
                            <div class="col social">
                                <a href="https://www.linkedin.com/in/dominic-wegrzynowski/" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a>
                            </div>
                            <div class="col social">
                                <a href="www.twitter.com" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
                            </div>
                            <div class="col social">
                                <a href="https://github.com/DominicWegrzynowski/" target="_blank"><i class="fab fa-github fa-2x"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
        </script>
        <!--Custom JS-->
        <script src="/js/site.js"></script>

        <!-- Prism JS -->
        <script src="/js/prism.js"></script>
        <script text="text/javascript">
            Prism.plugins.NormalizeWhitespace.setDefaults({
                'remove-trailing': true,
                'remove-indent': true,
                'left-trim': true,
                'right-trim': true,
            });
        </script>
    </body>

</html>